{
	"Description": " - AWS Glue IAM assumed role resources",
	"Parameters": {
		"InfrastructureID": {
			"Description": "Infrastructure ID",
			"Type": "String",
			"AllowedPattern": "[-a-z0-9]+",
			"MaxLength": 50
		}
	},
	"Resources": {
		"GlueConnectToNeptuneRole": {
			"Type": "AWS::IAM::Role",
			"Properties": {
				"AssumeRolePolicyDocument": {
					"Version": "2012-10-17",
					"Statement": [
						{
							"Effect": "Allow",
							"Principal": {
								"AWS": "*"
							},
							"Action": "sts:AssumeRole",
							"Condition": {
								"ArnEquals": {
									"aws:SourceArn": {
										"Fn::Sub": "arn:${AWS::Partition}:iam::${AWS::AccountId}:role/AWSGlueServiceRole_${InfrastructureID}"
									}
								}
							}
						}
					]
				},
				"Policies": [
					{
						"PolicyName": "glueconnecttoneptunerole",
						"PolicyDocument": {
							"Version": "2012-10-17",
							"Statement": [
								{
									"Effect": "Allow",
									"Action": "neptune-db:connect",
									"Resource": {
										"Fn::Sub": "arn:${AWS::Partition}:neptune-db:${AWS::Region}:${AWS::AccountId}:*/*"
									}
								}
							]
						}
					}
				],
				"MaxSessionDuration": 43200,
				"RoleName": {
					"Fn::Sub": "GlueConnectToNeptuneRole_${InfrastructureID}"
				}
			}
		}
	},
	"Outputs": {
		"GlueConnectToNeptuneRoleARN": {
			"Description": "Glue IAM connect to Neptune role ARN",
			"Value": {
				"Fn::GetAtt": [
					"GlueConnectToNeptuneRole",
					"Arn"
				]
			},
			"Export": {
				"Name": {
					"Fn::Sub": "${InfrastructureID}-GlueConnectToNeptuneRoleARN"
				}
			}
		}
	}
}